
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#003366">
    <meta name="description" content="Sistema de pedidos de Tinacos Plastinova - Elaborado con los m√°s altos est√°ndares de calidad">
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlRpbmFjb3MgUGxhc3Rpbm92YSIsCiAgInNob3J0X25hbWUiOiAiUGxhc3Rpbm92YSIsCiAgImRlc2NyaXB0aW9uIjogIlNpc3RlbWEgZGUgcGVkaWRvcyBkZSB0aW5hY29zIiwKICAic3RhcnRfdXJsIjogIi4iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiNmY2ZjZjkiLAogICJ0aGVtZV9jb2xvciI6ICIjMDAzMzY2IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9zdmcreG1sLCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxOTInIGhlaWdodD0nMTkyJyB2aWV3Qm94PScwIDAgMTkyIDE5Mic+JTNDcmVjdCB3aWR0aD0nMTkyJyBoZWlnaHQ9JzE5MicgZmlsbD0nJTIzMDAzMzY2Jy8+JTNDdGV4dCB4PSc1MCUyNScgeT0nNTAlMjUnIGZvbnQtc2l6ZT0nODAnIGZpbGw9JyUyM2ZmZmZmZicgdGV4dC1hbmNob3I9J21pZGRsZScgZHk9Jy4zZW0nPvCfmow8L3RleHQ+JTNDL3N2Zz4iLAogICAgICAic2l6ZXMiOiAiMTkyeDE5MiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9LAogICAgewogICAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nNTEyJyBoZWlnaHQ9JzUxMicgdmlld0JveD0nMCAwIDUxMiA1MTInPiUzQ3JlY3Qgd2lkdGg9JzUxMicgaGVpZ2h0PSc1MTInIGZpbGw9JyUyMzAwMzM2NicvPiUzQ3RleHQgeD0nNTAlMjUnIHk9JzUwJTI1JyBmb250LXNpemU9JzI1MCcgZmlsbD0nJTIzZmZmZmZmJyB0ZXh0LWFuY2hvcj0nbWlkZGxlJyBkeT0nLjNlbSc+8J+ajDwvdGV4dD4lM0Mvc3ZnPiIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2Uvc3ZnK3htbCIKICAgIH0KICBdCn0=">
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='192' height='192' viewBox='0 0 192 192'%3E%3Crect width='192' height='192' fill='%23003366'/%3E%3Ctext x='50%25' y='50%25' font-size='80' fill='%23ffffff' text-anchor='middle' dy='.3em'%3Eüö∞%3C/text%3E%3C/svg%3E">
    <title>App Ventas Tinacos</title>
    <style>
        :root {
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;
            --color-bg-1: rgba(59, 130, 246, 0.08);
            --color-bg-2: rgba(245, 158, 11, 0.08);
            --color-bg-3: rgba(34, 197, 94, 0.08);
            --color-bg-4: rgba(239, 68, 68, 0.08);
            --color-bg-5: rgba(147, 51, 234, 0.08);
            --color-bg-6: rgba(249, 115, 22, 0.08);
            --color-bg-7: rgba(236, 72, 153, 0.08);
            --color-bg-8: rgba(6, 182, 212, 0.08);
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);
            --focus-ring: 0 0 0 3px var(--color-focus-ring);
            --focus-outline: 2px solid var(--color-primary);
            --status-bg-opacity: 0.15;
            --status-border-opacity: 0.25;
            --color-success-rgb: 33, 128, 141;
            --color-error-rgb: 192, 21, 47;
            --color-warning-rgb: 168, 75, 47;
            --color-info-rgb: 98, 108, 113;
            --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.5;
            --letter-spacing-tight: -0.01em;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-gray-400-rgb: 119, 124, 124;
                --color-teal-300-rgb: 50, 184, 198;
                --color-gray-300-rgb: 167, 169, 169;
                --color-gray-200-rgb: 245, 245, 245;
                --color-bg-1: rgba(29, 78, 216, 0.15);
                --color-bg-2: rgba(180, 83, 9, 0.15);
                --color-bg-3: rgba(21, 128, 61, 0.15);
                --color-bg-4: rgba(185, 28, 28, 0.15);
                --color-bg-5: rgba(107, 33, 168, 0.15);
                --color-bg-6: rgba(194, 65, 12, 0.15);
                --color-bg-7: rgba(190, 24, 93, 0.15);
                --color-bg-8: rgba(8, 145, 178, 0.15);
                --color-background: var(--color-charcoal-700);
                --color-surface: var(--color-charcoal-800);
                --color-text: var(--color-gray-200);
                --color-text-secondary: rgba(var(--color-gray-300-rgb), 0.7);
                --color-primary: var(--color-teal-300);
                --color-primary-hover: var(--color-teal-400);
                --color-primary-active: var(--color-teal-800);
                --color-secondary: rgba(var(--color-gray-400-rgb), 0.15);
                --color-secondary-hover: rgba(var(--color-gray-400-rgb), 0.25);
                --color-secondary-active: rgba(var(--color-gray-400-rgb), 0.3);
                --color-border: rgba(var(--color-gray-400-rgb), 0.3);
                --color-error: var(--color-red-400);
                --color-success: var(--color-teal-300);
                --color-warning: var(--color-orange-400);
                --color-info: var(--color-gray-300);
                --color-focus-ring: rgba(var(--color-teal-300-rgb), 0.4);
                --color-btn-primary-text: var(--color-slate-900);
                --color-card-border: rgba(var(--color-gray-400-rgb), 0.2);
                --color-card-border-inner: rgba(var(--color-gray-400-rgb), 0.15);
                --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
                --color-select-caret: rgba(var(--color-gray-200-rgb), 0.8);
                --color-success-rgb: var(--color-teal-300-rgb);
                --color-error-rgb: var(--color-red-400-rgb);
                --color-warning-rgb: var(--color-orange-400-rgb);
                --color-info-rgb: var(--color-gray-300-rgb);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family-base);
            background-color: var(--color-background);
            color: var(--color-text);
            font-size: var(--font-size-base);
            line-height: var(--line-height-normal);
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-20);
        }

        .header {
            text-align: center;
            margin-bottom: var(--space-32);
            padding: var(--space-24) 0;
            border-bottom: 1px solid var(--color-border);
        }

        .header h1 {
            font-size: var(--font-size-4xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin-bottom: var(--space-8);
            letter-spacing: var(--letter-spacing-tight);
        }

        .header p {
            color: var(--color-text-secondary);
            font-size: var(--font-size-lg);
        }

        .tabs {
            display: flex;
            gap: var(--space-8);
            margin-bottom: var(--space-24);
            border-bottom: 2px solid var(--color-border);
            overflow-x: auto;
        }

        .tab-btn {
            padding: var(--space-12) var(--space-24);
            background: transparent;
            border: none;
            color: var(--color-text-secondary);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }

        .tab-btn:hover {
            color: var(--color-text);
            background-color: var(--color-secondary);
        }

        .tab-btn.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--color-surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-card-border);
            box-shadow: var(--shadow-sm);
            padding: var(--space-24);
            margin-bottom: var(--space-20);
        }

        .card h2 {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-16);
            color: var(--color-text);
        }

        .form-group {
            margin-bottom: var(--space-16);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-sm);
            color: var(--color-text);
        }

        .form-control {
            width: 100%;
            padding: var(--space-10) var(--space-12);
            font-size: var(--font-size-base);
            line-height: 1.5;
            color: var(--color-text);
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            transition: border-color var(--duration-fast) var(--ease-standard), box-shadow var(--duration-fast) var(--ease-standard);
            font-family: var(--font-family-base);
        }

        .form-control:focus {
            border-color: var(--color-primary);
            outline: var(--focus-outline);
        }

        select.form-control {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--space-12) center;
            background-size: 16px;
            padding-right: var(--space-32);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-10) var(--space-20);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            border: none;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--color-primary);
            color: var(--color-btn-primary-text);
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
        }

        .btn-primary:active {
            background: var(--color-primary-active);
        }

        .btn-secondary {
            background: var(--color-secondary);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: var(--color-secondary-hover);
        }

        .btn-full {
            width: 100%;
        }

        .order-item {
            display: flex;
            gap: var(--space-12);
            align-items: center;
            margin-bottom: var(--space-12);
            padding: var(--space-12);
            background-color: var(--color-secondary);
            border-radius: var(--radius-base);
        }

        .order-item input[type="number"] {
            width: 80px;
        }

        .order-item button {
            padding: var(--space-6) var(--space-12);
            background-color: var(--color-error);
            color: white;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: var(--font-size-sm);
        }

        .order-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            margin-bottom: var(--space-16);
            transition: box-shadow var(--duration-normal) var(--ease-standard);
        }

        .order-card:hover {
            box-shadow: var(--shadow-md);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-16);
            flex-wrap: wrap;
            gap: var(--space-12);
        }

        .order-number {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
        }

        .order-date {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-6) var(--space-12);
            border-radius: var(--radius-full);
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-sm);
        }

        .status-pendiente {
            background-color: rgba(var(--color-warning-rgb), var(--status-bg-opacity));
            color: var(--color-warning);
            border: 1px solid rgba(var(--color-warning-rgb), var(--status-border-opacity));
        }

        .status-proceso {
            background-color: rgba(var(--color-info-rgb), var(--status-bg-opacity));
            color: var(--color-info);
            border: 1px solid rgba(var(--color-info-rgb), var(--status-border-opacity));
        }

        .status-enviado {
            background-color: rgba(59, 130, 246, var(--status-bg-opacity));
            color: rgb(59, 130, 246);
            border: 1px solid rgba(59, 130, 246, var(--status-border-opacity));
        }

        .status-entregado {
            background-color: rgba(var(--color-success-rgb), var(--status-bg-opacity));
            color: var(--color-success);
            border: 1px solid rgba(var(--color-success-rgb), var(--status-border-opacity));
        }

        .order-details {
            margin-top: var(--space-16);
            padding-top: var(--space-16);
            border-top: 1px solid var(--color-border);
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-8);
            font-size: var(--font-size-sm);
        }

        .detail-label {
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
        }

        .detail-value {
            color: var(--color-text);
        }

        .product-list {
            margin-top: var(--space-12);
        }

        .product-item {
            padding: var(--space-8);
            background-color: var(--color-secondary);
            border-radius: var(--radius-sm);
            margin-bottom: var(--space-8);
        }

        .tracker-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: var(--space-24) 0;
            position: relative;
        }

        .tracker-step {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .tracker-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--color-secondary);
            border: 3px solid var(--color-border);
            margin: 0 auto var(--space-8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: var(--font-weight-bold);
            color: var(--color-text-secondary);
            position: relative;
            z-index: 2;
        }

        .tracker-step.completed .tracker-circle {
            background-color: var(--color-primary);
            border-color: var(--color-primary);
            color: var(--color-btn-primary-text);
        }

        .tracker-step.active .tracker-circle {
            background-color: var(--color-warning);
            border-color: var(--color-warning);
            color: white;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .tracker-label {
            font-size: var(--font-size-xs);
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
        }

        .tracker-step.completed .tracker-label,
        .tracker-step.active .tracker-label {
            color: var(--color-text);
            font-weight: var(--font-weight-semibold);
        }

        .tracker-line {
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--color-border);
            z-index: 1;
        }

        .tracker-progress {
            height: 100%;
            background-color: var(--color-primary);
            transition: width 0.5s ease-in-out;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
            margin-bottom: var(--space-24);
        }

        .stat-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-card-border);
            border-radius: var(--radius-lg);
            padding: var(--space-20);
            text-align: center;
        }

        .stat-number {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin-bottom: var(--space-8);
        }

        .stat-label {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .empty-state {
            text-align: center;
            padding: var(--space-32);
            color: var(--color-text-secondary);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: var(--space-16);
        }

        .footer {
            margin-top: 48px;
            padding: 32px 0 24px 0;
            border-top: 2px solid var(--color-border);
            background-color: var(--color-surface);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 32px;
            margin-bottom: 24px;
        }

        .footer-section h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--color-primary);
        }

        .footer-section p, .footer-section a {
            font-size: 14px;
            line-height: 1.8;
            color: var(--color-text);
            margin: 4px 0;
            text-decoration: none;
        }

        .footer-section a:hover {
            color: var(--color-primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
            font-size: 13px;
            color: var(--color-text-secondary);
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 8px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: var(--space-12);
            }

            .header h1 {
                font-size: var(--font-size-3xl);
            }

            .header img {
                max-width: 200px !important;
            }

            .order-header {
                flex-direction: column;
            }

            .tracker-container {
                flex-direction: column;
                gap: var(--space-16);
            }

            .tracker-line {
                display: none;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 24px;
            }
        }

        .alert {
            padding: var(--space-12) var(--space-16);
            border-radius: var(--radius-base);
            margin-bottom: var(--space-16);
            font-size: var(--font-size-sm);
        }

        .alert-success {
            background-color: rgba(var(--color-success-rgb), 0.1);
            color: var(--color-success);
            border: 1px solid rgba(var(--color-success-rgb), 0.3);
        }

        .alert-error {
            background-color: rgba(var(--color-error-rgb), 0.1);
            color: var(--color-error);
            border: 1px solid rgba(var(--color-error-rgb), 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="plastinova.jpg" alt="Tinacos Plastinova" style="max-width: 300px; height: auto; margin-bottom: 16px;">
            <h1 style="color: #003366; margin-bottom: 8px;">Tinacos Plastinova</h1>
            <p style="font-size: 16px; font-weight: 500; color: var(--color-text);">Elaborado con los m√°s altos est√°ndares de calidad</p>
            <p style="font-size: 14px; color: var(--color-text-secondary); margin-top: 8px;">Garant√≠a 10 a√±os</p>
            
            <div id="install-prompt" style="display: none; margin-top: 16px; padding: 12px 20px; background-color: var(--color-bg-3); border-radius: var(--radius-base); border: 2px solid var(--color-primary);">
                <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-size: 24px;">üì±</span>
                        <span style="font-weight: 600; color: var(--color-text);">¬°Instala nuestra app en tu dispositivo!</span>
                    </div>
                    <button id="install-button" class="btn btn-primary" style="font-size: 14px;">Instalar Ahora</button>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-btn" onclick="switchTab('login')">üë§ Iniciar Sesi√≥n</button>
            <button class="tab-btn" onclick="switchTab('registro')">üìù Registro</button>
            <button class="tab-btn active" onclick="switchTab('nuevo-pedido')">Nuevo Pedido</button>
            <button class="tab-btn" onclick="switchTab('mis-pedidos')">Mis Pedidos</button>
            <button class="tab-btn" onclick="switchTab('seguimiento')">Seguimiento</button>
            <button class="tab-btn" onclick="switchTab('admin')">üîê Admin</button>
        </div>

        <!-- Tab: Login -->
        <div id="login" class="tab-content">
            <div class="card">
                <h2>üë§ Iniciar Sesi√≥n</h2>
                <div id="login-alert-container"></div>
                <form id="login-form">
                    <div class="form-group">
                        <label class="form-label" for="login-phone">Tel√©fono *</label>
                        <input type="tel" id="login-phone" class="form-control" placeholder="555-123-4567" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="login-password">Contrase√±a *</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Tu contrase√±a" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Iniciar Sesi√≥n</button>
                </form>
                <p style="text-align: center; margin-top: 16px; color: var(--color-text-secondary);">
                    ¬øNo tienes cuenta? <a href="#" onclick="switchTab('registro')" style="color: var(--color-primary);">Reg√≠strate aqu√≠</a>
                </p>
            </div>
        </div>

        <!-- Tab: Registro -->
        <div id="registro" class="tab-content">
            <div class="card">
                <h2>üìù Crear Cuenta</h2>
                <div id="register-alert-container"></div>
                <form id="register-form">
                    <div class="form-group">
                        <label class="form-label" for="register-name">Nombre Completo *</label>
                        <input type="text" id="register-name" class="form-control" placeholder="Tu nombre completo" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="register-phone">Tel√©fono *</label>
                        <input type="tel" id="register-phone" class="form-control" placeholder="555-123-4567" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="register-email">Email *</label>
                        <input type="email" id="register-email" class="form-control" placeholder="correo@ejemplo.com" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="register-password">Contrase√±a *</label>
                        <input type="password" id="register-password" class="form-control" placeholder="M√≠nimo 6 caracteres" required minlength="6">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="register-address">Direcci√≥n Principal</label>
                        <textarea id="register-address" class="form-control" rows="3" placeholder="Calle, n√∫mero, colonia, ciudad (opcional)"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">Crear Cuenta</button>
                </form>
                <p style="text-align: center; margin-top: 16px; color: var(--color-text-secondary);">
                    ¬øYa tienes cuenta? <a href="#" onclick="switchTab('login')" style="color: var(--color-primary);">Inicia sesi√≥n aqu√≠</a>
                </p>
            </div>
        </div>

        <!-- Tab: Nuevo Pedido -->
        <div id="nuevo-pedido" class="tab-content active">
            <div class="card">
                <h2>Crear Nuevo Pedido</h2>
                <div id="alert-container"></div>
                <div id="guest-order-notice" style="background-color: var(--color-bg-2); padding: 16px; border-radius: var(--radius-base); margin-bottom: 20px; border: 1px solid rgba(var(--color-warning-rgb), 0.3);">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                        <span style="font-size: 24px;">‚ÑπÔ∏è</span>
                        <div>
                            <div style="font-weight: 600; color: var(--color-warning);">Pedido como Invitado</div>
                            <div style="font-size: 14px; color: var(--color-text);">Para una mejor experiencia y descuentos especiales, <a href="#" onclick="switchTab('login')" style="color: var(--color-primary); font-weight: 500;">inicia sesi√≥n</a></div>
                        </div>
                    </div>
                </div>

                <div id="user-info" style="background-color: var(--color-bg-3); padding: 16px; border-radius: var(--radius-base); margin-bottom: 20px; border: 1px solid rgba(var(--color-success-rgb), 0.3); display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-weight: 600; color: var(--color-success);">üëã Bienvenido</div>
                            <div id="user-name-display" style="font-size: 16px; color: var(--color-text); margin-top: 4px;"></div>
                        </div>
                        <button type="button" class="btn btn-secondary" onclick="logoutUser()" style="font-size: 12px; padding: 6px 12px;">Cerrar Sesi√≥n</button>
                    </div>
                </div>

                <form id="order-form">
                    <div class="form-group" id="customer-name-group">
                        <label class="form-label" for="customer-name">Nombre del Cliente *</label>
                        <input type="text" id="customer-name" class="form-control" placeholder="Ingresa tu nombre completo" required onchange="checkCustomerDiscount()">
                    </div>

                    <div class="form-group" id="customer-phone-group">
                        <label class="form-label" for="customer-phone">Tel√©fono *</label>
                        <input type="tel" id="customer-phone" class="form-control" placeholder="Ej: 555-123-4567" required>
                    </div>

                    <div class="form-group" id="customer-email-group">
                        <label class="form-label" for="customer-email">Email</label>
                        <input type="email" id="customer-email" class="form-control" placeholder="correo@ejemplo.com">
                    </div>

                    <div id="customer-discount-info" style="display: none; padding: 12px; background-color: var(--color-bg-3); border-radius: var(--radius-base); margin-bottom: 16px; border: 1px solid rgba(var(--color-success-rgb), 0.3);">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="font-size: 20px;">üéâ</span>
                            <div>
                                <div style="font-weight: 600; color: var(--color-success);">¬°Tienes un descuento especial!</div>
                                <div id="discount-detail" style="font-size: 14px; color: var(--color-text);"></div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="delivery-address">Direcci√≥n de Entrega *</label>
                        <textarea id="delivery-address" class="form-control" rows="3" placeholder="Calle, n√∫mero, colonia, ciudad" required></textarea>
                    </div>

                    <h3 style="margin-top: 24px; margin-bottom: 16px; font-size: 18px;">Productos</h3>
                    <div id="products-container"></div>
                    
                    <button type="button" class="btn btn-secondary" onclick="addProduct()" style="margin-bottom: 20px;">+ Agregar Producto</button>

                    <div id="order-summary" style="background-color: var(--color-secondary); padding: 16px; border-radius: var(--radius-base); margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-weight: 500;">Subtotal:</span>
                            <span id="subtotal-amount">$0</span>
                        </div>
                        <div id="discount-row" style="display: none; margin-bottom: 8px;">
                            <div style="display: flex; justify-content: space-between; color: var(--color-success);">
                                <span style="font-weight: 500;">Descuento:</span>
                                <span id="discount-amount">$0</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding-top: 12px; border-top: 2px solid var(--color-border); font-size: 18px; font-weight: bold;">
                            <span>Total:</span>
                            <span style="color: var(--color-primary);" id="total-amount">$0</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="order-notes">Notas Adicionales</label>
                        <textarea id="order-notes" class="form-control" rows="2" placeholder="Instrucciones especiales para la entrega"></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary btn-full">Realizar Pedido</button>
                </form>
            </div>
        </div>

        <!-- Tab: Mis Pedidos -->
        <div id="mis-pedidos" class="tab-content">
            <div class="stats-grid" id="stats-container"></div>
            <div class="card">
                <h2>Historial de Pedidos</h2>
                <div id="orders-list"></div>
            </div>
        </div>

        <!-- Tab: Seguimiento -->
        <div id="seguimiento" class="tab-content">
            <div class="card">
                <h2>Seguimiento de Pedido</h2>
                <div class="form-group">
                    <label class="form-label" for="order-search">N√∫mero de Pedido</label>
                    <input type="text" id="order-search" class="form-control" placeholder="Ingresa el n√∫mero de pedido">
                </div>
                <button class="btn btn-primary" onclick="searchOrder()">Buscar Pedido</button>

                <div id="tracking-result" style="margin-top: 24px;"></div>
            </div>
        </div>

        <!-- Tab: Admin -->
        <div id="admin" class="tab-content">
            <div class="card">
                <h2>üîê Panel de Administraci√≥n</h2>
                <div id="admin-login" style="max-width: 400px; margin: 0 auto;">
                    <div class="form-group">
                        <label class="form-label" for="admin-password">Contrase√±a de Administrador</label>
                        <input type="password" id="admin-password" class="form-control" placeholder="Ingresa la contrase√±a">
                    </div>
                    <button class="btn btn-primary btn-full" onclick="loginAdmin()">Iniciar Sesi√≥n</button>
                </div>
                
                <div id="admin-panel" style="display: none;">
                    <div class="tabs" style="margin-top: 24px;">
                        <button class="tab-btn active" onclick="switchAdminTab('inventory')">Inventario</button>
                        <button class="tab-btn" onclick="switchAdminTab('customers')">Clientes</button>
                        <button class="tab-btn" onclick="switchAdminTab('sellers')">Vendedores</button>
                        <button class="tab-btn" onclick="switchAdminTab('offers')">Ofertas</button>
                        <button class="tab-btn" onclick="switchAdminTab('discounts')">Descuentos</button>
                        <button class="tab-btn" onclick="switchAdminTab('reports')">üìä Reportes</button>
                    </div>

                    <!-- Inventario -->
                    <div id="admin-inventory" class="admin-tab-content active" style="margin-top: 24px;">
                        <h3 style="margin-bottom: 16px;">Gesti√≥n de Inventario</h3>
                        <div style="margin-bottom: 16px;">
                            <input type="text" id="product-filter" class="form-control" placeholder="Buscar producto..." onkeyup="filterProducts()">
                        </div>
                        <div id="inventory-list"></div>
                    </div>

                    <!-- Clientes -->
                    <div id="admin-customers" class="admin-tab-content" style="margin-top: 24px; display: none;">
                        <h3 style="margin-bottom: 16px;">Base de Datos de Clientes</h3>
                        
                        <div class="card" style="background-color: var(--color-bg-3); margin-bottom: 20px;">
                            <h4 style="margin-bottom: 12px;">Registrar Nuevo Cliente con Descuento</h4>
                            <div class="form-group">
                                <label class="form-label">Nombre del Cliente</label>
                                <input type="text" id="new-customer-name" class="form-control" placeholder="Nombre completo">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tel√©fono</label>
                                <input type="tel" id="new-customer-phone" class="form-control" placeholder="555-123-4567">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" id="new-customer-email" class="form-control" placeholder="correo@ejemplo.com">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Descuento</label>
                                <select id="new-customer-discount-type" class="form-control">
                                    <option value="">Sin descuento</option>
                                    <option value="percentage">Porcentaje (%)</option>
                                    <option value="fixed">Cantidad Fija ($)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Valor del Descuento</label>
                                <input type="number" id="new-customer-discount-value" class="form-control" placeholder="Ej: 10" min="0">
                            </div>
                            <button class="btn btn-primary" onclick="registerCustomer()">Registrar Cliente</button>
                        </div>

                        <div style="margin-bottom: 16px;">
                            <input type="text" id="customer-filter" class="form-control" placeholder="Buscar cliente..." onkeyup="filterCustomers()">
                        </div>
                        <div id="customers-list"></div>
                    </div>

                    <!-- Vendedores -->
                    <div id="admin-sellers" class="admin-tab-content" style="margin-top: 24px; display: none;">
                        <h3 style="margin-bottom: 16px;">Gesti√≥n de Vendedores</h3>
                        <div id="sellers-list"></div>
                        
                        <div class="card" style="margin-top: 24px; background-color: var(--color-bg-5);">
                            <h4 style="margin-bottom: 16px;">üí¨ Chat entre Vendedores</h4>
                            <div id="sellers-chat-container" style="max-height: 400px; overflow-y: auto; margin-bottom: 16px; padding: 16px; background-color: var(--color-secondary); border-radius: var(--radius-base);"></div>
                            <div style="display: flex; gap: 8px;">
                                <input type="text" id="admin-chat-message" class="form-control" placeholder="Escribe un mensaje al equipo...">
                                <button class="btn btn-primary" onclick="sendAdminMessage()">Enviar</button>
                            </div>
                        </div>
                    </div>

                    <!-- Ofertas -->
                    <div id="admin-offers" class="admin-tab-content" style="margin-top: 24px; display: none;">
                        <h3 style="margin-bottom: 16px;">Sistema de Ofertas</h3>
                        
                        <div class="card" style="background-color: var(--color-bg-5); margin-bottom: 20px;">
                            <h4 style="margin-bottom: 12px;">Crear Nueva Oferta</h4>
                            <div class="form-group">
                                <label class="form-label">T√≠tulo de la Oferta</label>
                                <input type="text" id="offer-title" class="form-control" placeholder="Ej: ¬°Descuento especial en tinacos!">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Mensaje de la Oferta</label>
                                <textarea id="offer-message" class="form-control" rows="3" placeholder="Describe los detalles de la oferta"></textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Descuento</label>
                                <select id="offer-discount-type" class="form-control">
                                    <option value="percentage">Porcentaje (%)</option>
                                    <option value="fixed">Cantidad Fija ($)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Valor del Descuento</label>
                                <input type="number" id="offer-discount-value" class="form-control" placeholder="Ej: 15" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fecha de Vencimiento</label>
                                <input type="date" id="offer-expiry" class="form-control">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Dirigida a:</label>
                                <select id="offer-target" class="form-control">
                                    <option value="all">Todos los clientes</option>
                                    <option value="customers">Solo clientes registrados</option>
                                    <option value="specific">Clientes espec√≠ficos</option>
                                </select>
                            </div>
                            <div id="specific-customers" style="display: none; margin-top: 12px;">
                                <label class="form-label">Seleccionar Clientes (separar por comas los tel√©fonos)</label>
                                <textarea id="offer-customers" class="form-control" rows="2" placeholder="555-1234, 555-5678, 777-9012"></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="createOffer()">Crear y Enviar Oferta</button>
                        </div>

                        <div id="offers-list"></div>
                    </div>

                    <!-- Descuentos -->
                    <div id="admin-discounts" class="admin-tab-content" style="margin-top: 24px; display: none;">
                        <h3 style="margin-bottom: 16px;">Gesti√≥n de Descuentos</h3>
                        <div class="card" style="background-color: var(--color-bg-2);">
                            <h4 style="margin-bottom: 12px;">Crear Nuevo Descuento</h4>
                            <div class="form-group">
                                <label class="form-label">C√≥digo de Descuento</label>
                                <input type="text" id="discount-code" class="form-control" placeholder="Ej: VERANO2024">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tipo de Descuento</label>
                                <select id="discount-type" class="form-control">
                                    <option value="percentage">Porcentaje (%)</option>
                                    <option value="fixed">Cantidad Fija ($)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Valor</label>
                                <input type="number" id="discount-value" class="form-control" placeholder="Ej: 10">
                            </div>
                            <button class="btn btn-primary" onclick="createDiscount()">Crear Descuento</button>
                        </div>
                        <div id="discounts-list" style="margin-top: 24px;"></div>
                    </div>

                    <!-- Reportes -->
                    <div id="admin-reports" class="admin-tab-content" style="margin-top: 24px; display: none;">
                        <h3 style="margin-bottom: 16px;">üìä Reportes de Ventas</h3>
                        
                        <div class="stats-grid" style="margin-bottom: 24px;">
                            <div class="stat-card">
                                <div class="stat-number" id="report-week-orders">0</div>
                                <div class="stat-label">Pedidos esta semana</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="report-week-sales">$0</div>
                                <div class="stat-label">Ventas esta semana</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="report-month-orders">0</div>
                                <div class="stat-label">Pedidos este mes</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="report-month-sales">$0</div>
                                <div class="stat-label">Ventas este mes</div>
                            </div>
                        </div>

                        <div class="card" style="background-color: var(--color-bg-5); margin-bottom: 20px;">
                            <h4 style="margin-bottom: 16px;">Exportar Reportes</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                                <div>
                                    <h5 style="margin-bottom: 12px; font-size: 16px;">üìÖ Semanal</h5>
                                    <button class="btn btn-primary btn-full" onclick="downloadWeeklyReport('list')" style="margin-bottom: 8px;">
                                        üìÑ Descargar Lista Semanal
                                    </button>
                                    <button class="btn btn-secondary btn-full" onclick="downloadWeeklyReport('chart')">
                                        üìä Descargar Gr√°fica Semanal
                                    </button>
                                </div>
                                <div>
                                    <h5 style="margin-bottom: 12px; font-size: 16px;">üìÜ Mensual</h5>
                                    <button class="btn btn-primary btn-full" onclick="downloadMonthlyReport('list')" style="margin-bottom: 8px;">
                                        üìÑ Descargar Lista Mensual
                                    </button>
                                    <button class="btn btn-secondary btn-full" onclick="downloadMonthlyReport('chart')">
                                        üìä Descargar Gr√°fica Mensual
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h4 style="margin-bottom: 16px;">Vista Previa - Ventas por Producto</h4>
                            <canvas id="sales-chart" style="max-height: 400px;"></canvas>
                        </div>

                        <div class="card" style="margin-top: 20px;">
                            <h4 style="margin-bottom: 16px;">Detalle de Ventas del Mes</h4>
                            <div id="monthly-details"></div>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="logoutAdmin()" style="margin-top: 24px;">Cerrar Sesi√≥n</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Cat√°logo de productos de tinacos con colores
        const products = [
            // Tambos 235 litros
            { id: 'tambo-235-rojo', name: 'Tambo 235 Lt - Rojo', capacity: 235, type: 'tambo', color: 'Rojo', price: 520, stock: 0, image: null },
            { id: 'tambo-235-verde', name: 'Tambo 235 Lt - Verde', capacity: 235, type: 'tambo', color: 'Verde', price: 520, stock: 0 },
            { id: 'tambo-235-negro', name: 'Tambo 235 Lt - Negro', capacity: 235, type: 'tambo', color: 'Negro', price: 520, stock: 0 },
            { id: 'tambo-235-cafe', name: 'Tambo 235 Lt - Caf√©', capacity: 235, type: 'tambo', color: 'Caf√©', price: 520, stock: 0 },
            { id: 'tambo-235-oxford', name: 'Tambo 235 Lt - Oxford', capacity: 235, type: 'tambo', color: 'Oxford', price: 520, stock: 0 },
            { id: 'tambo-235-melon', name: 'Tambo 235 Lt - Mel√≥n', capacity: 235, type: 'tambo', color: 'Mel√≥n', price: 520, stock: 0 },
            { id: 'tambo-235-rojoblanco', name: 'Tambo 235 Lt - Rojo/Blanco', capacity: 235, type: 'tambo', color: 'Rojo/Blanco', price: 520, stock: 0 },
            { id: 'tambo-235-azulblanco', name: 'Tambo 235 Lt - Azul/Blanco', capacity: 235, type: 'tambo', color: 'Azul/Blanco', price: 520, stock: 0 },
            { id: 'tambo-235-morado', name: 'Tambo 235 Lt - Morado', capacity: 235, type: 'tambo', color: 'Morado', price: 520, stock: 0 },
            { id: 'tambo-235-granito', name: 'Tambo 235 Lt - Granito', capacity: 235, type: 'tambo', color: 'Granito', price: 520, stock: 0 },
            
            // Tinacos 750 litros
            { id: 'tinaco-750-beige', name: 'Tinaco 750 Lt - Beige', capacity: 750, type: 'tinaco', color: 'Beige', price: 1800, stock: 0 },
            { id: 'tinaco-750-negro', name: 'Tinaco 750 Lt - Negro', capacity: 750, type: 'tinaco', color: 'Negro', price: 1800, stock: 0 },
            { id: 'tinaco-750-blanco', name: 'Tinaco 750 Lt - Blanco', capacity: 750, type: 'tinaco', color: 'Blanco', price: 1800, stock: 0 },
            { id: 'tinaco-750-azul', name: 'Tinaco 750 Lt - Azul', capacity: 750, type: 'tinaco', color: 'Azul', price: 1800, stock: 0 },
            { id: 'tinaco-750-rojo', name: 'Tinaco 750 Lt - Rojo', capacity: 750, type: 'tinaco', color: 'Rojo', price: 1800, stock: 0 },
            { id: 'tinaco-750-verde', name: 'Tinaco 750 Lt - Verde', capacity: 750, type: 'tinaco', color: 'Verde', price: 1800, stock: 0 },
            { id: 'tinaco-750-naranja', name: 'Tinaco 750 Lt - Naranja', capacity: 750, type: 'tinaco', color: 'Naranja', price: 1800, stock: 0 },
            { id: 'tinaco-750-natural', name: 'Tinaco 750 Lt - Natural', capacity: 750, type: 'tinaco', color: 'Natural', price: 1800, stock: 0 },
            
            // Tinacos 1100 litros
            { id: 'tinaco-1100-beige', name: 'Tinaco 1100 Lt - Beige', capacity: 1100, type: 'tinaco', color: 'Beige', price: 1500, stock: 0 },
            { id: 'tinaco-1100-negro', name: 'Tinaco 1100 Lt - Negro', capacity: 1100, type: 'tinaco', color: 'Negro', price: 1500, stock: 0 },
            { id: 'tinaco-1100-blanco', name: 'Tinaco 1100 Lt - Blanco', capacity: 1100, type: 'tinaco', color: 'Blanco', price: 1500, stock: 0 },
            { id: 'tinaco-1100-azul', name: 'Tinaco 1100 Lt - Azul', capacity: 1100, type: 'tinaco', color: 'Azul', price: 1500, stock: 0 },
            { id: 'tinaco-1100-rojo', name: 'Tinaco 1100 Lt - Rojo', capacity: 1100, type: 'tinaco', color: 'Rojo', price: 1500, stock: 0 },
            { id: 'tinaco-1100-verde', name: 'Tinaco 1100 Lt - Verde', capacity: 1100, type: 'tinaco', color: 'Verde', price: 1500, stock: 0 },
            { id: 'tinaco-1100-naranja', name: 'Tinaco 1100 Lt - Naranja', capacity: 1100, type: 'tinaco', color: 'Naranja', price: 1500, stock: 0 },
            { id: 'tinaco-1100-natural', name: 'Tinaco 1100 Lt - Natural', capacity: 1100, type: 'tinaco', color: 'Natural', price: 1500, stock: 0 },
            
            // Tinacos 1200 litros
            { id: 'tinaco-1200-beige', name: 'Tinaco 1200 Lt - Beige', capacity: 1200, type: 'tinaco', color: 'Beige', price: 1600, stock: 0 },
            { id: 'tinaco-1200-negro', name: 'Tinaco 1200 Lt - Negro', capacity: 1200, type: 'tinaco', color: 'Negro', price: 1600, stock: 0 },
            { id: 'tinaco-1200-blanco', name: 'Tinaco 1200 Lt - Blanco', capacity: 1200, type: 'tinaco', color: 'Blanco', price: 1600, stock: 0 },
            { id: 'tinaco-1200-azul', name: 'Tinaco 1200 Lt - Azul', capacity: 1200, type: 'tinaco', color: 'Azul', price: 1600, stock: 0 },
            { id: 'tinaco-1200-rojo', name: 'Tinaco 1200 Lt - Rojo', capacity: 1200, type: 'tinaco', color: 'Rojo', price: 1600, stock: 0 },
            { id: 'tinaco-1200-verde', name: 'Tinaco 1200 Lt - Verde', capacity: 1200, type: 'tinaco', color: 'Verde', price: 1600, stock: 0 },
            { id: 'tinaco-1200-naranja', name: 'Tinaco 1200 Lt - Naranja', capacity: 1200, type: 'tinaco', color: 'Naranja', price: 1600, stock: 0 },
            { id: 'tinaco-1200-natural', name: 'Tinaco 1200 Lt - Natural', capacity: 1200, type: 'tinaco', color: 'Natural', price: 1600, stock: 0, image: null }
        ];

        // NOTA: Los productos ahora soportan im√°genes. Puedes agregar URLs de im√°genes al campo 'image' en el futuro
        // Ejemplo: product.image = 'https://url-de-tu-imagen.com/tinaco.jpg' o usar data URLs

        // Base de datos de pedidos y descuentos (simulada)
        let orders = [];
        let discounts = [];
        let customers = [];
        let userAccounts = [];
        let sellers = [];
        let offers = [];
        let currentUser = null;
        let currentCustomerDiscount = null;
        let isAdminLoggedIn = false;
        let currentSellerUser = null;
        let sellerMessages = [];
        const ADMIN_PASSWORD = 'admin123';

        // Cargar datos del almacenamiento simulado
        function loadOrders() {
            const stored = getStoredOrders();
            orders = stored.length > 0 ? stored : generateSampleOrders();
        }

        function getStoredOrders() {
            try {
                const data = sessionStorage.getItem('orders');
                return data ? JSON.parse(data) : [];
            } catch (e) {
                return [];
            }
        }

        function saveOrders() {
            try {
                sessionStorage.setItem('orders', JSON.stringify(orders));
            } catch (e) {
                console.log('No se pudo guardar en sessionStorage');
            }
        }

        function loadProducts() {
            try {
                const stored = sessionStorage.getItem('products');
                if (stored) {
                    const storedProducts = JSON.parse(stored);
                    storedProducts.forEach(sp => {
                        const product = products.find(p => p.id === sp.id);
                        if (product) {
                            product.stock = sp.stock;
                            product.price = sp.price;
                        }
                    });
                }
            } catch (e) {
                console.log('Error al cargar productos');
            }
        }

        function saveProducts() {
            try {
                sessionStorage.setItem('products', JSON.stringify(products));
            } catch (e) {
                console.log('No se pudo guardar productos');
            }
        }

        function loadDiscounts() {
            try {
                const stored = sessionStorage.getItem('discounts');
                discounts = stored ? JSON.parse(stored) : [];
            } catch (e) {
                discounts = [];
            }
        }

        function loadCustomers() {
            try {
                const stored = sessionStorage.getItem('customers');
                customers = stored ? JSON.parse(stored) : [];
            } catch (e) {
                customers = [];
            }
        }

        function loadUserAccounts() {
            try {
                const stored = sessionStorage.getItem('userAccounts');
                userAccounts = stored ? JSON.parse(stored) : [];
            } catch (e) {
                userAccounts = [];
            }
        }

        function saveUserAccounts() {
            try {
                sessionStorage.setItem('userAccounts', JSON.stringify(userAccounts));
            } catch (e) {
                console.log('No se pudo guardar cuentas de usuario');
            }
        }

        function loadCurrentUser() {
            try {
                const stored = sessionStorage.getItem('currentUser');
                currentUser = stored ? JSON.parse(stored) : null;
                if (currentUser) {
                    updateUIForLoggedUser();
                }
            } catch (e) {
                currentUser = null;
            }
        }

        function loadSellers() {
            try {
                const stored = sessionStorage.getItem('sellers');
                sellers = stored ? JSON.parse(stored) : getDefaultSellers();
            } catch (e) {
                sellers = getDefaultSellers();
            }
        }

        function saveSellers() {
            try {
                sessionStorage.setItem('sellers', JSON.stringify(sellers));
            } catch (e) {
                console.log('No se pudo guardar vendedores');
            }
        }

        function loadOffers() {
            try {
                const stored = sessionStorage.getItem('offers');
                offers = stored ? JSON.parse(stored) : [];
            } catch (e) {
                offers = [];
            }
        }

        function loadSellerMessages() {
            try {
                const stored = sessionStorage.getItem('sellerMessages');
                sellerMessages = stored ? JSON.parse(stored) : [];
            } catch (e) {
                sellerMessages = [];
            }
        }

        function saveSellerMessages() {
            try {
                sessionStorage.setItem('sellerMessages', JSON.stringify(sellerMessages));
            } catch (e) {
                console.log('No se pudo guardar mensajes');
            }
        }

        function saveOffers() {
            try {
                sessionStorage.setItem('offers', JSON.stringify(offers));
            } catch (e) {
                console.log('No se pudo guardar ofertas');
            }
        }

        function getDefaultSellers() {
            return [
                {
                    id: 'seller-001',
                    name: 'Pedro D.',
                    fullName: 'Pedro Delgado Armenta',
                    phone: '7775347617',
                    email: 'pedro@plastinova.com',
                    password: 'Plastinova2024',
                    needsPasswordChange: true,
                    isActive: true,
                    clients: [],
                    createdAt: new Date().toISOString()
                },
                {
                    id: 'seller-002',
                    name: 'Fernando O.',
                    fullName: 'Fernando Ocampo L√≥pez',
                    phone: '5613420821',
                    email: 'fernando@plastinova.com',
                    password: 'Plastinova2024',
                    needsPasswordChange: true,
                    isActive: true,
                    clients: [],
                    createdAt: new Date().toISOString()
                },
                {
                    id: 'seller-003',
                    name: 'Husai',
                    fullName: 'Husai',
                    phone: '7775146927',
                    email: 'husai@plastinova.com',
                    password: 'Plastinova2024',
                    needsPasswordChange: true,
                    isActive: true,
                    clients: [],
                    createdAt: new Date().toISOString()
                },
                {
                    id: 'seller-004',
                    name: 'Isidro G.',
                    fullName: 'Isidro Gonz√°lez Aguirre',
                    phone: '7771636393',
                    email: 'isidro@plastinova.com',
                    password: 'Plastinova2024',
                    needsPasswordChange: true,
                    isActive: true,
                    clients: [],
                    createdAt: new Date().toISOString()
                }
            ];
        }

        function saveCurrentUser() {
            try {
                if (currentUser) {
                    sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                } else {
                    sessionStorage.removeItem('currentUser');
                }
            } catch (e) {
                console.log('No se pudo guardar usuario actual');
            }
        }

        function saveCustomers() {
            try {
                sessionStorage.setItem('customers', JSON.stringify(customers));
            } catch (e) {
                console.log('No se pudo guardar clientes');
            }
        }

        function checkCustomerDiscount() {
            const name = document.getElementById('customer-name').value.trim();
            const infoDiv = document.getElementById('customer-discount-info');
            const detailDiv = document.getElementById('discount-detail');
            
            if (!name) {
                infoDiv.style.display = 'none';
                currentCustomerDiscount = null;
                updateOrderSummary();
                return;
            }

            const customer = customers.find(c => c.name.toLowerCase() === name.toLowerCase());
            
            if (customer && customer.discountType && customer.discountValue > 0) {
                currentCustomerDiscount = {
                    type: customer.discountType,
                    value: customer.discountValue
                };
                
                const discountText = customer.discountType === 'percentage' 
                    ? `${customer.discountValue}% de descuento` 
                    : `$${customer.discountValue} de descuento`;
                
                detailDiv.textContent = `${customer.name} - ${discountText}`;
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
                currentCustomerDiscount = null;
            }
            
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const productItems = Array.from(document.querySelectorAll('#products-container .order-item'));
            let subtotal = 0;
            
            productItems.forEach(item => {
                const select = item.querySelector('select');
                const quantityInput = item.querySelector('input[type="number"]');
                
                if (select.value && quantityInput.value > 0) {
                    const product = products.find(p => p.id === select.value);
                    const quantity = parseInt(quantityInput.value);
                    subtotal += product.price * quantity;
                }
            });

            document.getElementById('subtotal-amount').textContent = '$' + subtotal.toLocaleString('es-MX');

            let discount = 0;
            if (currentCustomerDiscount) {
                if (currentCustomerDiscount.type === 'percentage') {
                    discount = subtotal * (currentCustomerDiscount.value / 100);
                } else {
                    discount = currentCustomerDiscount.value;
                }
                
                document.getElementById('discount-row').style.display = 'block';
                document.getElementById('discount-amount').textContent = '-$' + discount.toLocaleString('es-MX');
            } else {
                document.getElementById('discount-row').style.display = 'none';
            }

            const total = subtotal - discount;
            document.getElementById('total-amount').textContent = '$' + total.toLocaleString('es-MX');
        }

        function registerCustomer() {
            const name = document.getElementById('new-customer-name').value.trim();
            const businessName = document.getElementById('new-customer-business').value.trim();
            const phone = document.getElementById('new-customer-phone').value.trim();
            const email = document.getElementById('new-customer-email').value.trim();
            const discountType = document.getElementById('new-customer-discount-type').value;
            const discountValue = parseFloat(document.getElementById('new-customer-discount-value').value) || 0;

            if (!name || !phone) {
                showAlert('Por favor ingresa al menos nombre y tel√©fono', 'error');
                return;
            }

            if (customers.find(c => c.phone === phone)) {
                showAlert('Ya existe un cliente con este tel√©fono', 'error');
                return;
            }

            customers.push({
                id: Date.now(),
                name,
                phone,
                email,
                discountType: discountType || null,
                discountValue: discountType ? discountValue : 0,
                createdAt: new Date().toISOString()
            });

            saveCustomers();
            showAlert('Cliente registrado exitosamente', 'success');
            
            document.getElementById('new-customer-name').value = '';
            document.getElementById('new-customer-phone').value = '';
            document.getElementById('new-customer-email').value = '';
            document.getElementById('new-customer-discount-type').value = '';
            document.getElementById('new-customer-discount-value').value = '';
            
            renderCustomers();
        }

        function saveDiscounts() {
            try {
                sessionStorage.setItem('discounts', JSON.stringify(discounts));
            } catch (e) {
                console.log('No se pudo guardar descuentos');
            }
        }

        // Generar pedidos de ejemplo
        function generateSampleOrders() {
            const sampleOrders = [
                {
                    id: 'PED-2024-001',
                    customerName: 'Juan P√©rez',
                    phone: '555-1234',
                    email: 'juan@example.com',
                    address: 'Av. Principal 123, Col. Centro',
                    products: [
                        { productId: 'tinaco-1100-beige', productName: 'Tinaco 1100 Lt - Beige', quantity: 2, price: 2400 }
                    ],
                    total: 4800,
                    status: 'entregado',
                    date: '2024-10-15',
                    notes: 'Entrega en horario matutino'
                },
                {
                    id: 'PED-2024-002',
                    customerName: 'Mar√≠a Gonz√°lez',
                    phone: '555-5678',
                    email: 'maria@example.com',
                    address: 'Calle Reforma 456, Col. Jardines',
                    products: [
                        { productId: 'tinaco-750-blanco', productName: 'Tinaco 750 Lt - Blanco', quantity: 1, price: 1800 }
                    ],
                    total: 1800,
                    status: 'enviado',
                    date: '2024-11-01',
                    notes: ''
                },
                {
                    id: 'PED-2024-003',
                    customerName: 'Carlos Ram√≠rez',
                    phone: '555-9012',
                    email: 'carlos@example.com',
                    address: 'Blvd. Norte 789, Col. Industrial',
                    products: [
                        { productId: 'tambo-235-negro', productName: 'Tambo 235 Lt - Negro', quantity: 5, price: 850 }
                    ],
                    total: 4250,
                    status: 'proceso',
                    date: '2024-11-02',
                    notes: 'Requiere factura'
                }
            ];
            return sampleOrders;
        }

        // Inicializar aplicaci√≥n
        function init() {
            loadOrders();
            loadProducts();
            loadDiscounts();
            loadCustomers();
            loadUserAccounts();
            loadSellers();
            loadOffers();
            loadSellerMessages();
            loadCurrentUser();
            addProduct();
            renderOrders();
            updateStats();
            
            // Listeners para actualizar resumen en tiempo real
            document.getElementById('products-container').addEventListener('change', updateOrderSummary);
            document.getElementById('products-container').addEventListener('input', updateOrderSummary);

            // Listeners para formularios de autenticaci√≥n
            document.getElementById('register-form').addEventListener('submit', handleRegister);
            document.getElementById('login-form').addEventListener('submit', handleLogin);
        }

        // Cambiar entre tabs
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            
            // Buscar el bot√≥n correcto para activar
            const targetBtn = Array.from(buttons).find(btn => 
                btn.onclick && btn.onclick.toString().includes(`'${tabName}'`)
            );
            if (targetBtn) {
                targetBtn.classList.add('active');
            }

            if (tabName === 'mis-pedidos') {
                renderOrders();
                updateStats();
            }
        }

        // ============= FUNCIONES DE AUTENTICACI√ìN =============
        
        function handleRegister(e) {
            e.preventDefault();
            
            const name = document.getElementById('register-name').value.trim();
            const phone = document.getElementById('register-phone').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const address = document.getElementById('register-address').value.trim();

            if (!name || !phone || !email || !password) {
                showAuthAlert('Por favor completa todos los campos obligatorios', 'error', 'register-alert-container');
                return;
            }

            if (password.length < 6) {
                showAuthAlert('La contrase√±a debe tener al menos 6 caracteres', 'error', 'register-alert-container');
                return;
            }

            if (userAccounts.find(u => u.phone === phone)) {
                showAuthAlert('Ya existe una cuenta con este tel√©fono', 'error', 'register-alert-container');
                return;
            }

            if (userAccounts.find(u => u.email === email)) {
                showAuthAlert('Ya existe una cuenta con este email', 'error', 'register-alert-container');
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                phone,
                email,
                password, // En producci√≥n se debe hashear
                address: address || '',
                createdAt: new Date().toISOString()
            };

            userAccounts.push(newUser);
            saveUserAccounts();

            showAuthAlert('¬°Cuenta creada exitosamente! Ya puedes iniciar sesi√≥n', 'success', 'register-alert-container');
            
            setTimeout(() => {
                document.getElementById('register-form').reset();
                switchTab('login');
                document.getElementById('login-phone').value = phone;
            }, 2000);
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const phone = document.getElementById('login-phone').value.trim();
            const password = document.getElementById('login-password').value;

            if (!phone || !password) {
                showAuthAlert('Por favor ingresa tel√©fono y contrase√±a', 'error', 'login-alert-container');
                return;
            }

            const user = userAccounts.find(u => u.phone === phone && u.password === password);
            
            if (!user) {
                showAuthAlert('Tel√©fono o contrase√±a incorrectos', 'error', 'login-alert-container');
                return;
            }

            currentUser = user;
            saveCurrentUser();
            updateUIForLoggedUser();

            showAuthAlert('¬°Sesi√≥n iniciada correctamente!', 'success', 'login-alert-container');
            
            setTimeout(() => {
                switchTab('nuevo-pedido');
                const newOrderBtn = document.querySelector('.tab-btn:nth-child(3)');
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                newOrderBtn.classList.add('active');
            }, 1500);
        }

        function logoutUser() {
            currentUser = null;
            saveCurrentUser();
            updateUIForGuestUser();
            showAlert('Sesi√≥n cerrada', 'success');
        }

        function updateUIForLoggedUser() {
            // Mostrar info del usuario
            document.getElementById('user-info').style.display = 'block';
            document.getElementById('guest-order-notice').style.display = 'none';
            document.getElementById('user-name-display').textContent = currentUser.name;

            // Prellenar formulario con datos del usuario
            document.getElementById('customer-name').value = currentUser.name;
            document.getElementById('customer-phone').value = currentUser.phone;
            document.getElementById('customer-email').value = currentUser.email;
            document.getElementById('delivery-address').value = currentUser.address;

            // Deshabilitar campos prellenados
            document.getElementById('customer-name').readOnly = true;
            document.getElementById('customer-phone').readOnly = true;
            document.getElementById('customer-email').readOnly = true;

            // Cambiar estilos para mostrar que est√°n bloqueados
            document.getElementById('customer-name').style.backgroundColor = 'var(--color-secondary)';
            document.getElementById('customer-phone').style.backgroundColor = 'var(--color-secondary)';
            document.getElementById('customer-email').style.backgroundColor = 'var(--color-secondary)';

            // Verificar descuento
            checkCustomerDiscount();
        }

        function updateUIForGuestUser() {
            // Ocultar info del usuario
            document.getElementById('user-info').style.display = 'none';
            document.getElementById('guest-order-notice').style.display = 'block';

            // Limpiar y habilitar campos
            document.getElementById('customer-name').value = '';
            document.getElementById('customer-phone').value = '';
            document.getElementById('customer-email').value = '';
            document.getElementById('delivery-address').value = '';

            document.getElementById('customer-name').readOnly = false;
            document.getElementById('customer-phone').readOnly = false;
            document.getElementById('customer-email').readOnly = false;

            // Restaurar estilos normales
            document.getElementById('customer-name').style.backgroundColor = '';
            document.getElementById('customer-phone').style.backgroundColor = '';
            document.getElementById('customer-email').style.backgroundColor = '';

            document.getElementById('customer-discount-info').style.display = 'none';
            currentCustomerDiscount = null;
            updateOrderSummary();
        }

        function showAuthAlert(message, type, containerId) {
            const container = document.getElementById(containerId);
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            container.innerHTML = '';
            container.appendChild(alert);
            
            setTimeout(() => {
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            }, 5000);
        }

        // Agregar producto al formulario
        function addProduct() {
            const container = document.getElementById('products-container');
            const productDiv = document.createElement('div');
            productDiv.className = 'order-item';
            
            const productSelect = document.createElement('select');
            productSelect.className = 'form-control';
            productSelect.required = true;
            productSelect.innerHTML = '<option value="">Selecciona un producto</option>' +
                products.map(p => `<option value="${p.id}" data-price="${p.price}">${p.name} - $${p.price} ${p.stock > 0 ? '(Stock: ' + p.stock + ')' : '(Sin stock)'}</option>`).join('');
            
            const quantityInput = document.createElement('input');
            quantityInput.type = 'number';
            quantityInput.className = 'form-control';
            quantityInput.placeholder = 'Cant.';
            quantityInput.min = '1';
            quantityInput.value = '1';
            quantityInput.required = true;
            
            const removeBtn = document.createElement('button');
            removeBtn.textContent = '‚úï';
            removeBtn.type = 'button';
            removeBtn.onclick = () => {
                productDiv.remove();
                updateOrderSummary();
            };
            
            productDiv.appendChild(productSelect);
            productDiv.appendChild(quantityInput);
            productDiv.appendChild(removeBtn);
            container.appendChild(productDiv);
            updateOrderSummary();
        }

        // Procesar formulario de pedido
        document.getElementById('order-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const customerName = document.getElementById('customer-name').value.trim();
            const phone = document.getElementById('customer-phone').value.trim();
            const email = document.getElementById('customer-email').value.trim();
            const address = document.getElementById('delivery-address').value.trim();
            const notes = document.getElementById('order-notes').value.trim();
            
            const productItems = Array.from(document.querySelectorAll('#products-container .order-item'));
            const orderProducts = [];
            let total = 0;
            
            let hasError = false;
            productItems.forEach(item => {
                const select = item.querySelector('select');
                const quantityInput = item.querySelector('input[type="number"]');
                
                if (select.value && quantityInput.value > 0) {
                    const product = products.find(p => p.id === select.value);
                    const quantity = parseInt(quantityInput.value);
                    const subtotal = product.price * quantity;
                    
                    orderProducts.push({
                        productId: product.id,
                        productName: product.name,
                        quantity: quantity,
                        price: product.price
                    });
                    
                    total += subtotal;
                } else {
                    hasError = true;
                }
            });

            if (hasError || orderProducts.length === 0) {
                showAlert('Por favor completa todos los productos correctamente', 'error');
                return;
            }

            let discount = 0;
            let discountInfo = null;
            
            if (currentCustomerDiscount) {
                if (currentCustomerDiscount.type === 'percentage') {
                    discount = total * (currentCustomerDiscount.value / 100);
                } else {
                    discount = currentCustomerDiscount.value;
                }
                discountInfo = {
                    type: currentCustomerDiscount.type,
                    value: currentCustomerDiscount.value,
                    amount: discount
                };
            }

            const finalTotal = total - discount;

            const newOrder = {
                id: `PED-2024-${String(orders.length + 1).padStart(3, '0')}`,
                customerName,
                phone,
                email,
                address,
                products: orderProducts,
                subtotal: total,
                discount: discountInfo,
                total: finalTotal,
                status: 'pendiente',
                date: new Date().toISOString().split('T')[0],
                notes
            };

            orders.unshift(newOrder);
            saveOrders();
            
            showAlert('¬°Pedido creado exitosamente! N√∫mero: ' + newOrder.id, 'success');
            
            setTimeout(() => {
                document.getElementById('order-form').reset();
                document.getElementById('products-container').innerHTML = '';
                document.getElementById('customer-discount-info').style.display = 'none';
                currentCustomerDiscount = null;
                addProduct();
                updateOrderSummary();
                switchTab('mis-pedidos');
                const tabButton = document.querySelector('.tab-btn:nth-child(2)');
                document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
                tabButton.classList.add('active');
            }, 2000);
        });

        // Mostrar alertas
        function showAlert(message, type) {
            const container = document.getElementById('alert-container');
            const alert = document.createElement('div');
            alert.className = `alert alert-${type}`;
            alert.textContent = message;
            container.innerHTML = '';
            container.appendChild(alert);
            
            setTimeout(() => {
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            }, 5000);
        }

        // Renderizar lista de pedidos
        function renderOrders() {
            const container = document.getElementById('orders-list');
            
            // Filtrar pedidos seg√∫n el usuario logueado
            const userOrders = currentUser 
                ? orders.filter(order => order.phone === currentUser.phone)
                : orders;
            
            if (userOrders.length === 0) {
                const message = currentUser 
                    ? 'No tienes pedidos registrados' 
                    : 'No hay pedidos registrados';
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üì¶</div>
                        <p>${message}</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = userOrders.map(order => `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <div class="order-number">${order.id}</div>
                            <div class="order-date">üìÖ ${formatDate(order.date)}</div>
                        </div>
                        <span class="status-badge status-${order.status}">${getStatusText(order.status)}</span>
                    </div>
                    <div class="order-details">
                        <div class="detail-row">
                            <span class="detail-label">Cliente:</span>
                            <span class="detail-value">${order.customerName}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Tel√©fono:</span>
                            <span class="detail-value">${order.phone}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Direcci√≥n:</span>
                            <span class="detail-value">${order.address}</span>
                        </div>
                        <div class="product-list">
                            ${order.products.map(p => `
                                <div class="product-item">
                                    ${p.quantity}x ${p.productName} - $${(p.price * p.quantity).toLocaleString('es-MX')}
                                </div>
                            `).join('')}
                        </div>
                        ${order.discount ? `
                        <div class="detail-row" style="margin-top: 12px;">
                            <span class="detail-label">Subtotal:</span>
                            <span class="detail-value">$${order.subtotal.toLocaleString('es-MX')}</span>
                        </div>
                        <div class="detail-row" style="color: var(--color-success);">
                            <span class="detail-label">Descuento (${order.discount.type === 'percentage' ? order.discount.value + '%' : '$' + order.discount.value}):</span>
                            <span class="detail-value">-$${order.discount.amount.toLocaleString('es-MX')}</span>
                        </div>
                        ` : ''}
                        <div class="detail-row" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border); font-weight: 600; font-size: 16px;">
                            <span class="detail-label">Total:</span>
                            <span class="detail-value" style="color: var(--color-primary);">$${order.total.toLocaleString('es-MX')}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Actualizar estad√≠sticas
        function updateStats() {
            // Filtrar estad√≠sticas seg√∫n el usuario logueado
            const userOrders = currentUser 
                ? orders.filter(order => order.phone === currentUser.phone)
                : orders;

            const stats = {
                total: userOrders.length,
                pendiente: userOrders.filter(o => o.status === 'pendiente').length,
                proceso: userOrders.filter(o => o.status === 'proceso').length,
                enviado: userOrders.filter(o => o.status === 'enviado').length,
                entregado: userOrders.filter(o => o.status === 'entregado').length
            };

            const container = document.getElementById('stats-container');
            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${stats.total}</div>
                    <div class="stat-label">Total de Pedidos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: var(--color-warning);">${stats.pendiente}</div>
                    <div class="stat-label">Pendientes</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: var(--color-info);">${stats.proceso}</div>
                    <div class="stat-label">En Proceso</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: rgb(59, 130, 246);">${stats.enviado}</div>
                    <div class="stat-label">Enviados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" style="color: var(--color-success);">${stats.entregado}</div>
                    <div class="stat-label">Entregados</div>
                </div>
            `;
        }

        // Buscar y rastrear pedido
        function searchOrder() {
            const searchValue = document.getElementById('order-search').value.trim().toUpperCase();
            const resultContainer = document.getElementById('tracking-result');

            if (!searchValue) {
                resultContainer.innerHTML = '<p style="color: var(--color-text-secondary);">Ingresa un n√∫mero de pedido</p>';
                return;
            }

            const order = orders.find(o => o.id === searchValue);

            if (!order) {
                resultContainer.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üîç</div>
                        <p>No se encontr√≥ el pedido ${searchValue}</p>
                    </div>
                `;
                return;
            }

            const statusSteps = ['pendiente', 'proceso', 'enviado', 'entregado'];
            const currentIndex = statusSteps.indexOf(order.status);

            resultContainer.innerHTML = `
                <div class="order-card">
                    <div class="order-header">
                        <div>
                            <div class="order-number">${order.id}</div>
                            <div class="order-date">üìÖ ${formatDate(order.date)}</div>
                        </div>
                        <span class="status-badge status-${order.status}">${getStatusText(order.status)}</span>
                    </div>

                    <div class="tracker-container">
                        <div class="tracker-line">
                            <div class="tracker-progress" style="width: ${(currentIndex / 3) * 100}%"></div>
                        </div>
                        ${statusSteps.map((step, index) => `
                            <div class="tracker-step ${index < currentIndex ? 'completed' : ''} ${index === currentIndex ? 'active' : ''}">
                                <div class="tracker-circle">${index < currentIndex ? '‚úì' : index + 1}</div>
                                <div class="tracker-label">${getStatusText(step)}</div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="order-details">
                        <div class="detail-row">
                            <span class="detail-label">Cliente:</span>
                            <span class="detail-value">${order.customerName}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Tel√©fono:</span>
                            <span class="detail-value">${order.phone}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Direcci√≥n:</span>
                            <span class="detail-value">${order.address}</span>
                        </div>
                        ${order.notes ? `
                        <div class="detail-row">
                            <span class="detail-label">Notas:</span>
                            <span class="detail-value">${order.notes}</span>
                        </div>
                        ` : ''}
                        <div class="product-list">
                            ${order.products.map(p => `
                                <div class="product-item">
                                    ${p.quantity}x ${p.productName} - $${(p.price * p.quantity).toLocaleString('es-MX')}
                                </div>
                            `).join('')}
                        </div>
                        <div class="detail-row" style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border); font-weight: 600; font-size: 16px;">
                            <span class="detail-label">Total:</span>
                            <span class="detail-value" style="color: var(--color-primary);">$${order.total.toLocaleString('es-MX')}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // Funciones auxiliares
        function getStatusText(status) {
            const texts = {
                'pendiente': 'Pendiente',
                'proceso': 'En Proceso',
                'enviado': 'Enviado',
                'entregado': 'Entregado'
            };
            return texts[status] || status;
        }

        function formatDate(dateString) {
            const date = new Date(dateString + 'T00:00:00');
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('es-MX', options);
        }

        // ============= FUNCIONES ADMIN =============
        
        function loginAdmin() {
            const password = document.getElementById('admin-password').value;
            if (password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                document.getElementById('admin-login').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'block';
                renderInventory();
                renderCustomers();
                renderDiscounts();
                showAlert('Sesi√≥n iniciada correctamente', 'success');
            } else {
                showAlert('Contrase√±a incorrecta', 'error');
            }
        }

        function logoutAdmin() {
            isAdminLoggedIn = false;
            document.getElementById('admin-login').style.display = 'block';
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('admin-password').value = '';
        }

        function switchAdminTab(tabName) {
            const tabs = document.querySelectorAll('.admin-tab-content');
            const buttons = document.querySelectorAll('#admin-panel .tabs .tab-btn');
            
            tabs.forEach(tab => tab.style.display = 'none');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (tabName === 'inventory') {
                document.getElementById('admin-inventory').style.display = 'block';
                buttons[0].classList.add('active');
                renderInventory();
            } else if (tabName === 'customers') {
                document.getElementById('admin-customers').style.display = 'block';
                buttons[1].classList.add('active');
                renderCustomers();
            } else if (tabName === 'sellers') {
                document.getElementById('admin-sellers').style.display = 'block';
                buttons[2].classList.add('active');
                renderSellers();
            } else if (tabName === 'offers') {
                document.getElementById('admin-offers').style.display = 'block';
                buttons[3].classList.add('active');
                renderOffers();
                setupOfferTargetListener();
            } else if (tabName === 'discounts') {
                document.getElementById('admin-discounts').style.display = 'block';
                buttons[4].classList.add('active');
                renderDiscounts();
            } else if (tabName === 'reports') {
                document.getElementById('admin-reports').style.display = 'block';
                buttons[5].classList.add('active');
                renderReports();
            }
        }

        // Inventario
        function renderInventory() {
            const container = document.getElementById('inventory-list');
            const filter = document.getElementById('product-filter') ? document.getElementById('product-filter').value.toLowerCase() : '';
            
            const filteredProducts = products.filter(p => 
                p.name.toLowerCase().includes(filter) || 
                p.color.toLowerCase().includes(filter)
            );

            container.innerHTML = filteredProducts.map(product => `
                <div class="order-card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div>
                            <h4 style="margin: 0; font-size: 16px;">${product.name}</h4>
                            <p style="margin: 4px 0; color: var(--color-text-secondary); font-size: 14px;">
                                ${product.capacity} Lt - ${product.color}
                            </p>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 20px; font-weight: bold; color: var(--color-primary);">$${product.price}</div>
                            <div style="font-size: 14px; color: ${product.stock > 0 ? 'var(--color-success)' : 'var(--color-error)'};">
                                Stock: ${product.stock}
                            </div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="number" id="stock-${product.id}" value="${product.stock}" min="0" class="form-control" style="width: 100px;">
                        <button class="btn btn-primary" onclick="updateStock('${product.id}')">Actualizar Stock</button>
                        <input type="number" id="price-${product.id}" value="${product.price}" min="0" class="form-control" style="width: 120px;" placeholder="Precio">
                        <button class="btn btn-secondary" onclick="updatePrice('${product.id}')">Actualizar Precio</button>
                    </div>
                </div>
            `).join('');
        }

        function updateStock(productId) {
            const input = document.getElementById(`stock-${productId}`);
            const newStock = parseInt(input.value) || 0;
            const product = products.find(p => p.id === productId);
            if (product) {
                product.stock = newStock;
                saveProducts();
                showAlert('Stock actualizado correctamente', 'success');
                renderInventory();
            }
        }

        function updatePrice(productId) {
            const input = document.getElementById(`price-${productId}`);
            const newPrice = parseInt(input.value) || 0;
            const product = products.find(p => p.id === productId);
            if (product && newPrice > 0) {
                product.price = newPrice;
                saveProducts();
                showAlert('Precio actualizado correctamente', 'success');
                renderInventory();
            }
        }

        function filterProducts() {
            renderInventory();
        }

        // Clientes
        function renderCustomers() {
            const container = document.getElementById('customers-list');
            const filter = document.getElementById('customer-filter') ? document.getElementById('customer-filter').value.toLowerCase() : '';
            
            // Agrupar pedidos por cliente
            const customersMap = {};
            orders.forEach(order => {
                if (!customersMap[order.phone]) {
                    customersMap[order.phone] = {
                        name: order.customerName,
                        phone: order.phone,
                        email: order.email,
                        orders: [],
                        totalSpent: 0
                    };
                }
                customersMap[order.phone].orders.push(order);
                customersMap[order.phone].totalSpent += order.total;
            });

            // Combinar con clientes registrados
            customers.forEach(customer => {
                if (!customersMap[customer.phone]) {
                    customersMap[customer.phone] = {
                        name: customer.name,
                        phone: customer.phone,
                        email: customer.email,
                        orders: [],
                        totalSpent: 0,
                        discountType: customer.discountType,
                        discountValue: customer.discountValue
                    };
                } else {
                    // Agregar info de descuento si existe
                    customersMap[customer.phone].discountType = customer.discountType;
                    customersMap[customer.phone].discountValue = customer.discountValue;
                }
            });

            const customersList = Object.values(customersMap).filter(c => 
                c.name.toLowerCase().includes(filter) || 
                c.phone.includes(filter) ||
                (c.email && c.email.toLowerCase().includes(filter))
            );

            if (customersList.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No hay clientes registrados</p></div>';
                return;
            }

            container.innerHTML = customersList.map(customer => `
                <div class="order-card">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 16px;">
                        <div style="flex: 1;">
                            <h4 style="margin: 0; font-size: 18px;">${customer.name}</h4>
                            <p style="margin: 4px 0; color: var(--color-text-secondary);">üì± ${customer.phone}</p>
                            <p style="margin: 4px 0; color: var(--color-text-secondary);">‚úâÔ∏è ${customer.email || 'Sin email'}</p>
                            ${customer.discountType ? `
                            <div style="margin-top: 8px; padding: 6px 12px; background-color: var(--color-bg-3); border-radius: var(--radius-sm); display: inline-block;">
                                <span style="color: var(--color-success); font-weight: 600;">
                                    üéâ Descuento: ${customer.discountType === 'percentage' ? customer.discountValue + '%' : '$' + customer.discountValue}
                                </span>
                            </div>
                            ` : ''}
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 24px; font-weight: bold; color: var(--color-primary);">$${customer.totalSpent.toLocaleString('es-MX')}</div>
                            <div style="color: var(--color-text-secondary); margin-bottom: 8px;">Total gastado</div>
                            <button class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px;" onclick="editCustomerDiscount('${customer.name}')">
                                ${customer.discountType ? 'Editar Descuento' : 'Asignar Descuento'}
                            </button>
                        </div>
                    </div>
                    <div style="padding-top: 12px; border-top: 1px solid var(--color-border);">
                        <h5 style="margin-bottom: 8px; font-size: 14px;">Historial de Compras (${customer.orders.length})</h5>
                        ${customer.orders.map(order => `
                            <div class="product-item" style="margin-bottom: 8px;">
                                <div style="display: flex; justify-content: space-between;">
                                    <span>${order.id} - ${formatDate(order.date)}</span>
                                    <span style="font-weight: bold;">$${order.total.toLocaleString('es-MX')}</span>
                                </div>
                                <div style="font-size: 12px; color: var(--color-text-secondary);">
                                    ${order.products.map(p => `${p.quantity}x ${p.productName}`).join(', ')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function filterCustomers() {
            renderCustomers();
        }

        // Descuentos
        function createDiscount() {
            const code = document.getElementById('discount-code').value.trim().toUpperCase();
            const type = document.getElementById('discount-type').value;
            const value = parseFloat(document.getElementById('discount-value').value);

            if (!code || !value || value <= 0) {
                showAlert('Por favor completa todos los campos correctamente', 'error');
                return;
            }

            if (discounts.find(d => d.code === code)) {
                showAlert('Este c√≥digo de descuento ya existe', 'error');
                return;
            }

            discounts.push({
                id: Date.now(),
                code,
                type,
                value,
                active: true,
                createdAt: new Date().toISOString()
            });

            saveDiscounts();
            showAlert('Descuento creado exitosamente', 'success');
            document.getElementById('discount-code').value = '';
            document.getElementById('discount-value').value = '';
            renderDiscounts();
        }

        function renderDiscounts() {
            const container = document.getElementById('discounts-list');
            
            if (discounts.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No hay descuentos creados</p></div>';
                return;
            }

            container.innerHTML = '<h4 style="margin-bottom: 12px;">Descuentos Activos</h4>' +
                discounts.filter(d => d.active).map(discount => `
                    <div class="order-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-size: 20px; font-weight: bold; color: var(--color-primary);">${discount.code}</div>
                                <div style="color: var(--color-text-secondary); margin-top: 4px;">
                                    ${discount.type === 'percentage' ? discount.value + '% de descuento' : '$' + discount.value + ' de descuento'}
                                </div>
                            </div>
                            <button class="btn btn-secondary" onclick="toggleDiscount(${discount.id})">
                                ${discount.active ? 'Desactivar' : 'Activar'}
                            </button>
                        </div>
                    </div>
                `).join('');
        }

        function toggleDiscount(discountId) {
            const discount = discounts.find(d => d.id === discountId);
            if (discount) {
                discount.active = !discount.active;
                saveDiscounts();
                showAlert(`Descuento ${discount.active ? 'activado' : 'desactivado'}`, 'success');
                renderDiscounts();
            }
        }

        function editCustomerDiscount(customerName) {
            const customer = customers.find(c => c.name.toLowerCase() === customerName.toLowerCase());
            
            if (!customer) {
                // Si no existe en la lista de clientes registrados, buscarlo en pedidos
                const order = orders.find(o => o.customerName.toLowerCase() === customerName.toLowerCase());
                if (order) {
                    customers.push({
                        id: Date.now(),
                        name: order.customerName,
                        phone: order.phone,
                        email: order.email,
                        discountType: null,
                        discountValue: 0,
                        createdAt: new Date().toISOString()
                    });
                    saveCustomers();
                }
            }

            const newDiscountType = prompt('Tipo de descuento:\n1 = Porcentaje (%)\n2 = Cantidad Fija ($)\n0 = Sin descuento', customer && customer.discountType === 'percentage' ? '1' : customer && customer.discountType === 'fixed' ? '2' : '0');
            
            if (newDiscountType === null) return;

            let discountType = null;
            if (newDiscountType === '1') discountType = 'percentage';
            else if (newDiscountType === '2') discountType = 'fixed';

            let discountValue = 0;
            if (discountType) {
                const valuePrompt = prompt(`Ingresa el valor del descuento (${discountType === 'percentage' ? '%' : '$'}):`, customer ? customer.discountValue : '0');
                if (valuePrompt === null) return;
                discountValue = parseFloat(valuePrompt) || 0;
            }

            const customerIndex = customers.findIndex(c => c.name.toLowerCase() === customerName.toLowerCase());
            if (customerIndex >= 0) {
                customers[customerIndex].discountType = discountType;
                customers[customerIndex].discountValue = discountValue;
            }

            saveCustomers();
            showAlert('Descuento actualizado correctamente', 'success');
            renderCustomers();
        }

        // ============= PWA SERVICE WORKER =============
        
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'plastinova-v1';
                    const urlsToCache = [
                        './'
                    ];

                    self.addEventListener('install', event => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then(cache => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', event => {
                        event.respondWith(
                            caches.match(event.request)
                                .then(response => response || fetch(event.request))
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then(registration => {
                        console.log('Service Worker registrado:', registration);
                    })
                    .catch(error => {
                        console.log('Error al registrar Service Worker:', error);
                    });
            });
        }

        // ============= INSTALACI√ìN PWA =============
        
        let deferredPrompt;

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Mostrar el prompt de instalaci√≥n
            const installPrompt = document.getElementById('install-prompt');
            const installButton = document.getElementById('install-button');
            
            if (installPrompt) {
                installPrompt.style.display = 'block';
            }

            if (installButton) {
                installButton.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        
                        if (outcome === 'accepted') {
                            console.log('Usuario acept√≥ la instalaci√≥n');
                            showAlert('¬°App instalada exitosamente! üéâ', 'success');
                        }
                        
                        deferredPrompt = null;
                        installPrompt.style.display = 'none';
                    }
                });
            }
        });

        window.addEventListener('appinstalled', () => {
            console.log('PWA instalada');
            const installPrompt = document.getElementById('install-prompt');
            if (installPrompt) {
                installPrompt.style.display = 'none';
            }
            showAlert('¬°Aplicaci√≥n instalada correctamente! Ahora puedes usarla sin internet', 'success');
        });

        // ============= FUNCIONES DE VENDEDORES =============

        function renderSellers() {
            const container = document.getElementById('sellers-list');
            
            if (sellers.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No hay vendedores registrados</p></div>';
                return;
            }

            container.innerHTML = sellers.map(seller => {
                const sellerOrders = orders.filter(o => o.sellerId === seller.id);
                const totalSales = sellerOrders.reduce((sum, o) => sum + o.total, 0);
                
                return `
                    <div class="order-card">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <h4 style="margin: 0; font-size: 18px;">${seller.name}</h4>
                                <p style="margin: 4px 0; color: var(--color-text-secondary); font-size: 13px;">${seller.fullName}</p>
                                <p style="margin: 4px 0; color: var(--color-text-secondary);">üì± ${seller.phone}</p>
                                <p style="margin: 4px 0; color: var(--color-text-secondary);">‚úâÔ∏è ${seller.email}</p>
                                <div style="margin-top: 8px;">
                                    <span class="status-badge ${seller.isActive ? 'status-entregado' : 'status-pendiente'}">
                                        ${seller.isActive ? '‚úì Activo' : '‚è∏ Inactivo'}
                                    </span>
                                    ${seller.needsPasswordChange ? 
                                        '<span class="status-badge status-proceso" style="margin-left: 8px;">‚ö†Ô∏è Cambiar contrase√±a</span>' 
                                        : ''}
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 24px; font-weight: bold; color: var(--color-primary);">$${totalSales.toLocaleString('es-MX')}</div>
                                <div style="color: var(--color-text-secondary); margin-bottom: 8px;">${sellerOrders.length} pedidos</div>
                                <div style="color: var(--color-text-secondary); font-size: 13px;">${seller.clients.length} clientes</div>
                            </div>
                        </div>
                        <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--color-border); display: flex; gap: 8px;">
                            <button class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px;" onclick="toggleSellerStatus('${seller.id}')">
                                ${seller.isActive ? 'Desactivar' : 'Activar'}
                            </button>
                            <button class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px;" onclick="resetSellerPassword('${seller.id}')">
                                Resetear Contrase√±a
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            renderSellersChat();
        }

        function toggleSellerStatus(sellerId) {
            const seller = sellers.find(s => s.id === sellerId);
            if (seller) {
                seller.isActive = !seller.isActive;
                saveSellers();
                showAlert(`Vendedor ${seller.isActive ? 'activado' : 'desactivado'}`, 'success');
                renderSellers();
            }
        }

        function resetSellerPassword(sellerId) {
            const seller = sellers.find(s => s.id === sellerId);
            if (seller) {
                seller.password = 'Plastinova2024';
                seller.needsPasswordChange = true;
                saveSellers();
                showAlert('Contrase√±a restablecida a: Plastinova2024', 'success');
                renderSellers();
            }
        }

        function renderSellersChat() {
            const container = document.getElementById('sellers-chat-container');
            if (!container) return;
            
            if (sellerMessages.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--color-text-secondary); padding: 20px;">No hay mensajes a√∫n</p>';
                return;
            }

            container.innerHTML = sellerMessages.map(msg => {
                const sender = msg.senderId === 'admin' ? 'Administrador' : sellers.find(s => s.id === msg.senderId)?.name || 'Vendedor';
                const isAdmin = msg.senderId === 'admin';
                
                return `
                    <div style="margin-bottom: 12px; padding: 12px; background-color: ${isAdmin ? 'var(--color-bg-5)' : 'var(--color-surface)'}; border-radius: var(--radius-base); border-left: 3px solid ${isAdmin ? 'var(--color-primary)' : 'var(--color-warning)'};">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <strong style="color: ${isAdmin ? 'var(--color-primary)' : 'var(--color-warning)'};">${sender}</strong>
                            <span style="font-size: 12px; color: var(--color-text-secondary);">${formatDateTime(msg.timestamp)}</span>
                        </div>
                        <div style="color: var(--color-text);">${msg.message}</div>
                        ${msg.orderId ? `
                            <div style="margin-top: 8px; padding: 8px; background-color: var(--color-bg-1); border-radius: var(--radius-sm); font-size: 13px;">
                                üì¶ Pedido: <strong>${msg.orderId}</strong>
                                ${msg.type === 'transfer' ? `<br>üîÑ Transferido a: ${sellers.find(s => s.id === msg.targetSellerId)?.name}` : ''}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
            
            container.scrollTop = container.scrollHeight;
        }

        function sendAdminMessage() {
            const input = document.getElementById('admin-chat-message');
            const message = input.value.trim();
            
            if (!message) return;

            sellerMessages.push({
                id: Date.now(),
                senderId: 'admin',
                message: message,
                timestamp: new Date().toISOString(),
                type: 'message'
            });

            saveSellerMessages();
            input.value = '';
            renderSellersChat();
            showAlert('Mensaje enviado al equipo', 'success');
        }

        function formatDateTime(isoString) {
            const date = new Date(isoString);
            const options = { 
                day: '2-digit', 
                month: 'short', 
                hour: '2-digit', 
                minute: '2-digit' 
            };
            return date.toLocaleDateString('es-MX', options);
        }

        // ============= FUNCIONES DE OFERTAS =============

        function renderOffers() {
            const container = document.getElementById('offers-list');
            
            if (offers.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>No hay ofertas creadas</p></div>';
                return;
            }

            container.innerHTML = '<h4 style="margin-bottom: 12px;">Ofertas Creadas</h4>' +
                offers.map(offer => `
                    <div class="order-card">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <h4 style="margin: 0; font-size: 18px; color: var(--color-primary);">${offer.title}</h4>
                                <p style="margin: 8px 0; color: var(--color-text);">${offer.message}</p>
                                <div style="margin-top: 8px;">
                                    <span class="status-badge ${offer.active ? 'status-entregado' : 'status-pendiente'}">
                                        ${offer.active ? '‚úì Activa' : '‚è∏ Pausada'}
                                    </span>
                                    <span style="margin-left: 8px; color: var(--color-text-secondary); font-size: 13px;">
                                        ${offer.discountType === 'percentage' ? offer.discountValue + '% OFF' : '$' + offer.discountValue + ' OFF'}
                                    </span>
                                </div>
                                <p style="margin-top: 8px; font-size: 13px; color: var(--color-text-secondary);">
                                    üìÖ Vence: ${formatDate(offer.expiryDate)} | üë• ${offer.target === 'all' ? 'Todos' : offer.target === 'customers' ? 'Clientes registrados' : 'Espec√≠ficos'}
                                </p>
                            </div>
                            <div style="text-align: right;">
                                <button class="btn btn-secondary" style="font-size: 12px; padding: 6px 12px; margin-bottom: 8px;" onclick="toggleOffer(${offer.id})">
                                    ${offer.active ? 'Pausar' : 'Activar'}
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
        }

        function setupOfferTargetListener() {
            const targetSelect = document.getElementById('offer-target');
            const specificDiv = document.getElementById('specific-customers');
            
            if (targetSelect && specificDiv) {
                targetSelect.addEventListener('change', function() {
                    specificDiv.style.display = this.value === 'specific' ? 'block' : 'none';
                });
            }
        }

        function createOffer() {
            const title = document.getElementById('offer-title').value.trim();
            const message = document.getElementById('offer-message').value.trim();
            const discountType = document.getElementById('offer-discount-type').value;
            const discountValue = parseFloat(document.getElementById('offer-discount-value').value) || 0;
            const expiryDate = document.getElementById('offer-expiry').value;
            const target = document.getElementById('offer-target').value;
            const specificCustomers = document.getElementById('offer-customers').value.trim();

            if (!title || !message || !discountValue || !expiryDate) {
                showAlert('Por favor completa todos los campos obligatorios', 'error');
                return;
            }

            const newOffer = {
                id: Date.now(),
                title,
                message,
                discountType,
                discountValue,
                expiryDate,
                target,
                specificCustomers: target === 'specific' ? specificCustomers.split(',').map(s => s.trim()) : [],
                active: true,
                createdAt: new Date().toISOString()
            };

            offers.push(newOffer);
            saveOffers();

            // Simular env√≠o de notificaciones
            let targetCount = 0;
            if (target === 'all') {
                targetCount = customers.length + orders.length;
            } else if (target === 'customers') {
                targetCount = customers.length;
            } else {
                targetCount = newOffer.specificCustomers.length;
            }

            showAlert(`¬°Oferta creada y enviada a ${targetCount} clientes via WhatsApp! üì±`, 'success');
            
            document.getElementById('offer-title').value = '';
            document.getElementById('offer-message').value = '';
            document.getElementById('offer-discount-value').value = '';
            document.getElementById('offer-expiry').value = '';
            document.getElementById('offer-target').value = 'all';
            document.getElementById('offer-customers').value = '';
            document.getElementById('specific-customers').style.display = 'none';
            
            renderOffers();
        }

        function toggleOffer(offerId) {
            const offer = offers.find(o => o.id === offerId);
            if (offer) {
                offer.active = !offer.active;
                saveOffers();
                showAlert(`Oferta ${offer.active ? 'activada' : 'pausada'}`, 'success');
                renderOffers();
            }
        }

        // ============= REPORTES =============

        function renderReports() {
            updateReportStats();
            renderMonthlyDetails();
            renderSalesChart();
        }

        function updateReportStats() {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);

            const weekOrders = orders.filter(o => new Date(o.date) >= weekAgo);
            const monthOrders = orders.filter(o => new Date(o.date) >= monthStart);

            const weekSales = weekOrders.reduce((sum, o) => sum + o.total, 0);
            const monthSales = monthOrders.reduce((sum, o) => sum + o.total, 0);

            document.getElementById('report-week-orders').textContent = weekOrders.length;
            document.getElementById('report-week-sales').textContent = '$' + weekSales.toLocaleString('es-MX');
            document.getElementById('report-month-orders').textContent = monthOrders.length;
            document.getElementById('report-month-sales').textContent = '$' + monthSales.toLocaleString('es-MX');
        }

        function renderMonthlyDetails() {
            const container = document.getElementById('monthly-details');
            const now = new Date();
            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
            const monthOrders = orders.filter(o => new Date(o.date) >= monthStart);

            if (monthOrders.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--color-text-secondary);">No hay ventas este mes</p>';
                return;
            }

            container.innerHTML = monthOrders.map(order => `
                <div class="product-item" style="margin-bottom: 12px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="flex: 1;">
                            <strong>${order.id}</strong> - ${order.customerName}
                            <div style="font-size: 13px; color: var(--color-text-secondary); margin-top: 4px;">
                                ${formatDate(order.date)} | ${order.products.map(p => p.quantity + 'x ' + p.productName).join(', ')}
                            </div>
                        </div>
                        <strong style="color: var(--color-primary); font-size: 16px;">$${order.total.toLocaleString('es-MX')}</strong>
                    </div>
                </div>
            `).join('');
        }

        function renderSalesChart() {
            const canvas = document.getElementById('sales-chart');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const now = new Date();
            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
            const monthOrders = orders.filter(o => new Date(o.date) >= monthStart);

            const productSales = {};
            monthOrders.forEach(order => {
                order.products.forEach(p => {
                    if (!productSales[p.productName]) {
                        productSales[p.productName] = 0;
                    }
                    productSales[p.productName] += p.quantity * p.price;
                });
            });

            const sortedProducts = Object.entries(productSales)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            const labels = sortedProducts.map(p => p[0]);
            const data = sortedProducts.map(p => p[1]);

            // Simple bar chart
            canvas.width = canvas.offsetWidth;
            canvas.height = 400;

            const maxValue = Math.max(...data);
            const barWidth = (canvas.width / labels.length) * 0.8;
            const spacing = (canvas.width / labels.length) * 0.2;

            ctx.fillStyle = '#003366';
            ctx.font = '12px sans-serif';

            data.forEach((value, index) => {
                const barHeight = (value / maxValue) * (canvas.height - 60);
                const x = index * (barWidth + spacing) + spacing / 2;
                const y = canvas.height - barHeight - 40;

                ctx.fillStyle = index % 2 === 0 ? '#21808D' : '#003366';
                ctx.fillRect(x, y, barWidth, barHeight);

                ctx.fillStyle = '#000';
                ctx.fillText('$' + value.toLocaleString('es-MX'), x + barWidth / 2 - 20, y - 5);
            });
        }

        function downloadWeeklyReport(type) {
            const now = new Date();
            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
            const weekOrders = orders.filter(o => new Date(o.date) >= weekAgo);

            if (type === 'list') {
                downloadReportList(weekOrders, 'Semanal');
            } else {
                downloadReportChart(weekOrders, 'Semanal');
            }
        }

        function downloadMonthlyReport(type) {
            const now = new Date();
            const monthStart = new Date(now.getFullYear(), now.getMonth(), 1);
            const monthOrders = orders.filter(o => new Date(o.date) >= monthStart);

            if (type === 'list') {
                downloadReportList(monthOrders, 'Mensual');
            } else {
                downloadReportChart(monthOrders, 'Mensual');
            }
        }

        function downloadReportList(ordersData, period) {
            const totalOrders = ordersData.length;
            const totalSales = ordersData.reduce((sum, o) => sum + o.total, 0);
            const avgTicket = totalOrders > 0 ? totalSales / totalOrders : 0;

            const productSales = {};
            ordersData.forEach(order => {
                order.products.forEach(p => {
                    if (!productSales[p.productName]) {
                        productSales[p.productName] = { quantity: 0, revenue: 0 };
                    }
                    productSales[p.productName].quantity += p.quantity;
                    productSales[p.productName].revenue += p.quantity * p.price;
                });
            });

            let report = `REPORTE ${period.toUpperCase()} DE VENTAS - TINACOS PLASTINOVA\n`;
            report += `Generado: ${new Date().toLocaleDateString('es-MX')}\n`;
            report += `==============================================\n\n`;
            report += `RESUMEN GENERAL:\n`;
            report += `- Total de Pedidos: ${totalOrders}\n`;
            report += `- Ventas Totales: $${totalSales.toLocaleString('es-MX')}\n`;
            report += `- Ticket Promedio: $${avgTicket.toLocaleString('es-MX')}\n\n`;
            report += `VENTAS POR PRODUCTO:\n`;
            
            Object.entries(productSales).forEach(([product, data]) => {
                report += `- ${product}: ${data.quantity} unidades = $${data.revenue.toLocaleString('es-MX')}\n`;
            });

            report += `\n\nDETALLE DE PEDIDOS:\n`;
            report += `==============================================\n`;

            ordersData.forEach(order => {
                report += `\nPedido: ${order.id}\n`;
                report += `Fecha: ${formatDate(order.date)}\n`;
                report += `Cliente: ${order.customerName} (${order.phone})\n`;
                report += `Productos:\n`;
                order.products.forEach(p => {
                    report += `  - ${p.quantity}x ${p.productName} = $${(p.quantity * p.price).toLocaleString('es-MX')}\n`;
                });
                if (order.discount) {
                    report += `Descuento: -$${order.discount.amount.toLocaleString('es-MX')}\n`;
                }
                report += `Total: $${order.total.toLocaleString('es-MX')}\n`;
                report += `Estado: ${getStatusText(order.status)}\n`;
            });

            report += `\n\n==============================================\n`;
            report += `INFORMACI√ìN DE CONTACTO:\n`;
            report += `Tinacos Plastinova\n`;
            report += `RFC: PPU790219S16\n`;
            report += `Tel: 563 625 9982\n`;
            report += `Email: tinacos-plastinova@outlook.com\n`;

            const blob = new Blob([report], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Reporte_${period}_${new Date().toISOString().split('T')[0]}.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showAlert(`Reporte ${period.toLowerCase()} descargado exitosamente`, 'success');
        }

        function downloadReportChart(ordersData, period) {
            const canvas = document.createElement('canvas');
            canvas.width = 1200;
            canvas.height = 800;
            const ctx = canvas.getContext('2d');

            ctx.fillStyle = '#FCFCF9';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const productSales = {};
            ordersData.forEach(order => {
                order.products.forEach(p => {
                    if (!productSales[p.productName]) {
                        productSales[p.productName] = 0;
                    }
                    productSales[p.productName] += p.quantity * p.price;
                });
            });

            const sortedProducts = Object.entries(productSales)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            ctx.fillStyle = '#003366';
            ctx.font = 'bold 32px sans-serif';
            ctx.fillText(`Reporte ${period} - Tinacos Plastinova`, 50, 60);

            ctx.font = '20px sans-serif';
            ctx.fillText(`Generado: ${new Date().toLocaleDateString('es-MX')}`, 50, 100);

            const totalOrders = ordersData.length;
            const totalSales = ordersData.reduce((sum, o) => sum + o.total, 0);

            ctx.font = 'bold 24px sans-serif';
            ctx.fillStyle = '#21808D';
            ctx.fillText(`Total Pedidos: ${totalOrders}  |  Ventas Totales: $${totalSales.toLocaleString('es-MX')}`, 50, 140);

            const chartTop = 180;
            const chartHeight = 450;
            const chartLeft = 100;
            const chartWidth = canvas.width - 200;

            const labels = sortedProducts.map(p => p[0]);
            const data = sortedProducts.map(p => p[1]);
            const maxValue = Math.max(...data);

            const barWidth = (chartWidth / labels.length) * 0.7;
            const spacing = (chartWidth / labels.length) * 0.3;

            ctx.strokeStyle = '#ccc';
            ctx.beginPath();
            ctx.moveTo(chartLeft, chartTop);
            ctx.lineTo(chartLeft, chartTop + chartHeight);
            ctx.lineTo(chartLeft + chartWidth, chartTop + chartHeight);
            ctx.stroke();

            data.forEach((value, index) => {
                const barHeight = (value / maxValue) * chartHeight;
                const x = chartLeft + index * (barWidth + spacing) + spacing / 2;
                const y = chartTop + chartHeight - barHeight;

                ctx.fillStyle = index % 2 === 0 ? '#21808D' : '#003366';
                ctx.fillRect(x, y, barWidth, barHeight);

                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px sans-serif';
                ctx.fillText('$' + value.toLocaleString('es-MX'), x + 5, y - 10);

                ctx.save();
                ctx.translate(x + barWidth / 2, chartTop + chartHeight + 20);
                ctx.rotate(-Math.PI / 4);
                ctx.font = '14px sans-serif';
                ctx.fillText(labels[index].substring(0, 20), 0, 0);
                ctx.restore();
            });

            ctx.fillStyle = '#626C71';
            ctx.font = '16px sans-serif';
            ctx.fillText('RFC: PPU790219S16 | Tel: 563 625 9982 | tinacos-plastinova@outlook.com', 50, canvas.height - 30);

            canvas.toBlob(blob => {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `Grafica_${period}_${new Date().toISOString().split('T')[0]}.png`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                showAlert(`Gr√°fica ${period.toLowerCase()} descargada exitosamente`, 'success');
            });
        }

        // Iniciar aplicaci√≥n
        init();
    
        // Librer√≠a jsPDF para generaci√≥n de PDFs (versi√≥n embebida simplificada)
        function generateInvoice(order, customer, isInvoice = false) {
            const doc = {
                lines: [],
                addLine: function(text) { this.lines.push(text); }
            };

            const folio = 'PLAST-' + order.id;
            const fecha = new Date(order.date).toLocaleDateString('es-MX');

            // Encabezado
            doc.addLine('========================================');
            doc.addLine('         TINACOS PLASTINOVA');
            doc.addLine('     Elaborado con los m√°s altos');
            doc.addLine('      est√°ndares de calidad');
            doc.addLine('========================================');
            doc.addLine('');
            doc.addLine(isInvoice ? '           FACTURA' : '      NOTA DE REMISI√ìN');
            doc.addLine('');
            doc.addLine('Folio: ' + folio);
            doc.addLine('Fecha: ' + fecha);
            doc.addLine('');
            doc.addLine('----------------------------------------');
            doc.addLine('DATOS FISCALES:');
            doc.addLine('RFC: XAXX010101000');
            doc.addLine('Carretera estatal 601, 62747');
            doc.addLine('La Mojonera, Morelos');
            doc.addLine('Tel: 563-625-9982');
            doc.addLine('----------------------------------------');
            doc.addLine('');
            doc.addLine('CLIENTE:');
            doc.addLine('Nombre: ' + customer.name);
            if (customer.businessName) {
                doc.addLine('Negocio: ' + customer.businessName);
            }
            doc.addLine('Tel√©fono: ' + customer.phone);
            if (customer.email) {
                doc.addLine('Email: ' + customer.email);
            }
            doc.addLine('');
            doc.addLine('========================================');
            doc.addLine('PRODUCTOS');
            doc.addLine('========================================');

            let subtotal = 0;
            order.items.forEach(item => {
                const product = products.find(p => p.id === item.productId);
                if (product) {
                    doc.addLine('');
                    doc.addLine(product.name);
                    doc.addLine('Cantidad: ' + item.quantity + ' x $' + product.price.toFixed(2));
                    const itemTotal = item.quantity * product.price;
                    doc.addLine('Subtotal: $' + itemTotal.toFixed(2));
                    subtotal += itemTotal;
                }
            });

            doc.addLine('');
            doc.addLine('========================================');
            doc.addLine('TOTALES');
            doc.addLine('========================================');
            doc.addLine('Subtotal: $' + subtotal.toFixed(2));

            if (isInvoice) {
                const iva = subtotal * 0.16;
                const total = subtotal + iva;
                doc.addLine('IVA (16%): $' + iva.toFixed(2));
                doc.addLine('TOTAL: $' + total.toFixed(2));
            } else {
                doc.addLine('TOTAL: $' + subtotal.toFixed(2));
            }

            doc.addLine('');
            doc.addLine('========================================');
            doc.addLine('');
            doc.addLine('Vendedor: ' + (order.seller || 'N/A'));
            doc.addLine('');
            doc.addLine('Gracias por su preferencia');
            doc.addLine('');
            doc.addLine('========================================');

            return doc.lines.join('\n');
        }

        function downloadDocument(content, filename) {
            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            link.click();
            URL.revokeObjectURL(link.href);
        }

    </script>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>üìç Ubicaci√≥n</h3>
                    <p>Carretera Zapata - Zacatepec 10</p>
                    <p>Col. L√°zaro C√°rdenas</p>
                    <p>Chiconcuac, Morelos</p>
                    <p>C.P. 62790</p>
                </div>

                <div class="footer-section">
                    <h3>üìû Contacto</h3>
                    <div class="contact-item">
                        <span>‚òéÔ∏è</span>
                        <a href="tel:5636259982">563 625 9982</a>
                    </div>
                    <div class="contact-item">
                        <span>üì±</span>
                        <a href="https://wa.me/525636259982" target="_blank" rel="noopener noreferrer">WhatsApp: 563 625 9982</a>
                    </div>
                    <p style="font-size: 13px; margin-top: 12px; color: var(--color-text-secondary);">Tel√©fonos adicionales:</p>
                    <p style="font-size: 13px;">777 514 6927 | 561 342 0821</p>
                    <p style="font-size: 13px;">777 232 7248 | 777 534 7617 | 777 163 6393</p>
                </div>

                <div class="footer-section">
                    <h3>üåê En L√≠nea</h3>
                    <div class="contact-item">
                        <span>üìß</span>
                        <a href="mailto:tinacos-plastinova@outlook.com">tinacos-plastinova@outlook.com</a>
                    </div>
                    <div class="contact-item">
                        <span>üåç</span>
                        <a href="https://tinacosplastinova.my.canva.site" target="_blank" rel="noopener noreferrer">tinacosplastinova.my.canva.site</a>
                    </div>
                    <div class="contact-item">
                        <span>üìò</span>
                        <a href="https://facebook.com/tinacos.plastinova" target="_blank" rel="noopener noreferrer">Tinacos Plastinova</a>
                    </div>
                </div>

                <div class="footer-section">
                    <h3>üïê Horario de Atenci√≥n</h3>
                    <p><strong>Lunes a Viernes:</strong></p>
                    <p>8:00 AM - 5:00 PM</p>
                    <p style="margin-top: 12px;"><strong>S√°bados:</strong></p>
                    <p>8:00 AM - 2:00 PM</p>
                    <p style="margin-top: 12px; font-size: 13px; color: var(--color-text-secondary);">
                        <strong>RFC:</strong> PPU790219S16
                    </p>
                </div>
            </div>

            <div class="footer-bottom">
                <p><strong>Tinacos Plastinova</strong> - Elaborado con los m√°s altos est√°ndares de calidad</p>
                <p style="margin-top: 8px;">Garant√≠a 10 a√±os | ¬© 2024 Todos los derechos reservados</p>
            </div>
        </div>
    </footer>
</body>
</html>
